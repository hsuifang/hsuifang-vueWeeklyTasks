(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bcd9910"],{"0c78":function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),n={class:"container pt-4 pb-4 pt-lg-7 pb-lg-7"},a={class:"card"},o={class:"card-body"},l=Object(r["createVNode"])("div",{class:"d-flex justify-content-md-between pr-3 mb-4"},[Object(r["createVNode"])("h2",{class:"h6 text-secondary"},"訂單清單")],-1),s={key:0,class:"text-end mb-2"},d={class:"table caption-top"},i=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{scope:"col"},"購買時間"),Object(r["createVNode"])("th",{scope:"col"},"姓名"),Object(r["createVNode"])("th",{scope:"col"},"購買款項"),Object(r["createVNode"])("th",{scope:"col"},"付款金額"),Object(r["createVNode"])("th",{scope:"col"},"是否付款"),Object(r["createVNode"])("th",{scope:"col"},"功能")])],-1),b={key:0},u=Object(r["createVNode"])("td",{class:"text-center text-muted",colspan:"5"},[Object(r["createVNode"])("img",{width:"100",src:"https://media.giphy.com/media/wnYB3vx9t6PXiq1ubB/giphy.gif"})],-1),p={class:"list-unstyled"},O={class:"text-secondary"},j={class:"form-check form-switch"},f={key:0,class:"text-center text-muted"},m=Object(r["createVNode"])("td",{class:"text-center text-muted",colspan:"6"},"無商品",-1),g={class:"d-flex justify-content-md-between"},h=Object(r["createTextVNode"])(" 目前有 "),y=Object(r["createTextVNode"])(" 項訂單 ");function N(e,t,c,N,V,k){var v=Object(r["resolveComponent"])("Pagination"),x=Object(r["resolveComponent"])("OrderModal");return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",o,[l,V.orders.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-pill px-3",onClick:t[1]||(t[1]=function(){return k.deleteAllOrders&&k.deleteAllOrders.apply(k,arguments)})}," 刪除全部 ")])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("table",d,[i,Object(r["createVNode"])("tbody",null,[V.isLoading?(Object(r["openBlock"])(),Object(r["createBlock"])("tr",b,[u])):(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(V.orders,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:t.id},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.localeDateStr(t.create_at)),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.user.name),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("ul",p,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.products,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{key:t},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.product.title)+" ",1),Object(r["createVNode"])("span",O,"數量："+Object(r["toDisplayString"])(e.qty)+" "+Object(r["toDisplayString"])(e.product.unit),1)])})),128))])]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.currency(t.total)),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",j,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return k.toggleOrderItemStatus(t)}},null,40,["onUpdate:modelValue","onChange"]),[[r["vModelCheckbox"],t.is_paid]])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-sm btn-primary me-1","data-action":"remove",onClick:function(e){return k.handleOrderItem(t)}}," 編輯 ",8,["onClick"]),Object(r["createVNode"])("button",{type:"button",class:"btn btn-sm btn-danger text-white","data-action":"remove",onClick:function(e){return k.deleteOrderItem({id:t.id,title:t.title})}}," 刪除 ",8,["onClick"])])])})),128)),0===V.orders.length?(Object(r["openBlock"])(),Object(r["createBlock"])("tr",f,[m])):Object(r["createCommentVNode"])("",!0)],64))])]),Object(r["createVNode"])("div",g,[Object(r["createVNode"])("p",null,[h,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(V.orders.length),1),y]),Object(r["createVNode"])(v,{pageInfo:V.pageInfo,onChangePage:k.changePage},null,8,["pageInfo","onChangePage"])])])]),Object(r["createVNode"])(x,{ref:"orderModal",orderInfo:V.currentItem,onUpdateOrder:k.submitOrderItem},null,8,["orderInfo","onUpdateOrder"])])}var V=c("1da1"),k=(c("c740"),c("96cf"),c("365c")),v=c("1799"),x={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},w={class:"modal-dialog modal-xl",role:"document"},B={class:"modal-content border-0"},I=Object(r["createVNode"])("div",{class:"modal-header"},[Object(r["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(r["createVNode"])("span",null,"訂單細節")]),Object(r["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body px-5 py-4"},S={class:"row"},C={class:"col-lg-5 mb-5"},_=Object(r["createVNode"])("h3",{class:"fs-6 bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"用戶資料",-1),$={key:0,class:"list-unstyled px-4"},L={class:"d-flex justify-content-between py-3 border-bottom"},M=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"姓名",-1),P={class:"d-flex justify-content-between py-3 border-bottom"},R=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"Email",-1),F={class:"d-flex justify-content-between py-3 border-bottom"},A=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"電話",-1),E={class:"d-flex justify-content-between py-3 border-bottom"},U=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"地址",-1),q={class:"col-lg-7"},T=Object(r["createVNode"])("h3",{class:"fs-6 bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"訂單細節",-1),H={class:"list-unstyled px-4 mb-4"},J={class:"d-flex justify-content-between py-3 border-bottom"},X=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"訂單編號",-1),Y={class:"d-flex justify-content-between align-items-center py-3 border-bottom"},z=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"下單時間",-1),G={class:"d-flex justify-content-between py-3 border-bottom"},K=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"付款時間",-1),Q={key:0},W={key:1},Z={class:"d-flex justify-content-between py-3 border-bottom"},ee=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"付款狀態",-1),te={key:0,class:"text-success"},ce={key:1,class:"text-muted"},re={class:"d-flex justify-content-between py-3 border-bottom"},ne=Object(r["createVNode"])("h4",{class:"fs-6 mb-0"},"總金額",-1),ae=Object(r["createVNode"])("h3",{class:"fs-6 bg-light rounded-pill px-4 py-3 mb-3 fw-bold text-secondary"}," 選購商品 ",-1),oe={class:"list-unstyled px-4 mb-3"},le={class:"fs-6"},se={class:"d-flex justify-content-end px-4"},de={class:"form-check"},ie={class:"form-check-label",for:"flexCheckDefault"},be={key:0},ue={key:1},pe={class:"modal-footer"};function Oe(e,t,c,n,a,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",x,[Object(r["createVNode"])("div",w,[Object(r["createVNode"])("div",B,[I,Object(r["createVNode"])("div",D,[Object(r["createVNode"])("div",S,[Object(r["createVNode"])("div",C,[_,a.tempOrder.user?(Object(r["openBlock"])(),Object(r["createBlock"])("ul",$,[Object(r["createVNode"])("li",L,[M,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(a.tempOrder.user.name),1)]),Object(r["createVNode"])("li",P,[R,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(a.tempOrder.user.email),1)]),Object(r["createVNode"])("li",F,[A,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(a.tempOrder.user.tel),1)]),Object(r["createVNode"])("li",E,[U,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(a.tempOrder.user.address),1)])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",q,[T,Object(r["createVNode"])("ul",H,[Object(r["createVNode"])("li",J,[X,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(a.tempOrder.id),1)]),Object(r["createVNode"])("li",Y,[z,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.$filters.localeDateStr(a.tempOrder.create_at))+" "+Object(r["toDisplayString"])(e.$filters.localeTimeStr(a.tempOrder.create_at)),1)]),Object(r["createVNode"])("li",G,[K,Object(r["createVNode"])("p",null,[a.tempOrder.paid_date?(Object(r["openBlock"])(),Object(r["createBlock"])("span",Q,Object(r["toDisplayString"])(e.$filters.localeDateStrs(a.tempOrder.paid_date)),1)):(Object(r["openBlock"])(),Object(r["createBlock"])("span",W,"-"))])]),Object(r["createVNode"])("li",Z,[ee,Object(r["createVNode"])("p",null,[a.tempOrder.is_paid?(Object(r["openBlock"])(),Object(r["createBlock"])("strong",te,"已付款")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",ce,"尚未付款"))])]),Object(r["createVNode"])("li",re,[ne,Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.$filters.currency(a.tempOrder.total)),1)])]),ae,Object(r["createVNode"])("ul",oe,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a.tempOrder.products,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{class:"d-flex justify-content-between",key:t.id},[Object(r["createVNode"])("h3",le,Object(r["toDisplayString"])(t.product.title),1),Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(t.qty)+" / "+Object(r["toDisplayString"])(t.product.unit),1),Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))]),Object(r["createVNode"])("div",se,[Object(r["createVNode"])("div",de,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempOrder.is_paid=e})},null,512),[[r["vModelCheckbox"],a.tempOrder.is_paid]]),Object(r["createVNode"])("label",ie,[a.tempOrder.is_paid?(Object(r["openBlock"])(),Object(r["createBlock"])("span",be,"已付款")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",ue,"未付款"))])])])])])]),Object(r["createVNode"])("div",pe,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("updateOrder",a.tempOrder)})}," 修改付款狀態 ")])])])],512)}var je=c("e0ae"),fe={props:{orderInfo:{type:Object,default:function(){return{}}}},mixins:[je["a"]],data:function(){return{tempOrder:{}}},watch:{orderInfo:function(){this.tempOrder=this.orderInfo}}};fe.render=Oe;var me=fe,ge={components:{Pagination:v["a"],OrderModal:me},data:function(){return{currentItem:{},orders:[],pageInfo:{current_page:1,has_next:!1,has_pre:!1,total_pages:1},isCreateItem:!0,isLoading:!1}},methods:{fetchOrders:function(){var e=arguments,t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a,o,l,s;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,c.prev=1,t.isLoading=!0,c.next=5,Object(k["q"])(r);case 5:n=c.sent,a=n.data,o=a.orders,l=a.pagination,s=a.success,s?(t.orders=o,t.pageInfo=l):t.$vHttpNotice(n,"取得訂單資訊"),c.next=13;break;case 10:c.prev=10,c.t0=c["catch"](1),t.$vErrorNotice();case 13:return c.prev=13,t.isLoading=!1,c.finish(13);case 16:case"end":return c.stop()}}),c,null,[[1,10,13,16]])})))()},toggleOrderItemStatus:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return t.isLoading=!0,t.currentItem=e,c.next=4,t.submitOrderItem(t.currentItem);case 4:t.isLoading=!1;case 5:case"end":return c.stop()}}),c)})))()},deleteOrderItem:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(r=e.id,n=e.title,a=void 0===n?"":n,!window.confirm("你確定要刪除".concat(a,"嗎？"))){c.next=14;break}return t.isLoading=!0,c.prev=3,c.next=6,Object(k["g"])(r);case 6:o=c.sent,o.data.success&&t.fetchOrders(t.pageInfo.current_page),c.next=14;break;case 10:c.prev=10,c.t0=c["catch"](3),t.isLoading=!1,t.$vErrorNotice();case 14:case"end":return c.stop()}}),c,null,[[3,10]])})))()},deleteAllOrders:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){var c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$vLoading(!0),t.prev=1,t.next=4,Object(k["h"])();case 4:c=t.sent,r=c.data.success,r?(e.carts=[],e.fetchOrders()):e.$vHttpsNotice(c,"刪除所有訂單"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$vErrorNotice();case 12:return t.prev=12,e.$vLoading(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},submitOrderItem:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,t.$vLoading(!0),r=e.id,c.next=5,Object(k["w"])({id:r,data:{data:e}});case 5:n=c.sent,a=n.data.success,a&&(t.$refs.orderModal.closeModal(),r?(o=t.orders.findIndex((function(e){return e.id===r})),-1!==o&&(t.orders[o]=e)):t.fetchOrders()),t.$vHttpsNotice(n,"修改訂單資訊"),c.next=14;break;case 11:c.prev=11,c.t0=c["catch"](0),t.$vErrorNotice();case 14:return c.prev=14,t.$vLoading(!1),c.finish(14);case 17:case"end":return c.stop()}}),c,null,[[0,11,14,17]])})))()},handleOrderItem:function(e){e&&(this.currentItem=e,this.isCreateItem=!1),this.$refs.orderModal.openModal()},updateOrderItem:function(e){this.submitOrderItem(e)},changePage:function(e){this.fetchOrders(e)},init:function(){this.fetchOrders()}},created:function(){this.init()}};ge.render=N;t["default"]=ge},1799:function(e,t,c){"use strict";var r=c("7a23"),n={class:"btn-group me-2",role:"group","aria-label":"First group"};function a(e,t,c,a,o,l){return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-primary",disabled:!c.pageInfo.has_pre,onClick:t[1]||(t[1]=function(e){return l.changePage(c.pageInfo.current_page-1)})}," < ",8,["disabled"]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(c.pageInfo.total_pages,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("button",{type:"button",class:["btn btn-outline-primary",{active:e===c.pageInfo.current_page}],key:"page".concat(e),onClick:function(t){return l.changePage(e)}},Object(r["toDisplayString"])(e),11,["onClick"])})),128)),Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-primary",disabled:!c.pageInfo.has_next,onClick:t[2]||(t[2]=function(e){return l.changePage(c.pageInfo.current_page+1)})}," > ",8,["disabled"])])}var o={name:"pagination",props:{pageInfo:{type:Object}},data:function(){return{}},methods:{changePage:function(e){e!==this.pageInfo.current_page&&this.$emit("changePage",e)}}};o.render=a;t["a"]=o},b0c0:function(e,t,c){var r=c("83ab"),n=c("9bf2").f,a=Function.prototype,o=a.toString,l=/^\s*function ([^ (]*)/,s="name";r&&!(s in a)&&n(a,s,{configurable:!0,get:function(){try{return o.call(this).match(l)[1]}catch(e){return""}}})},c740:function(e,t,c){"use strict";var r=c("23e7"),n=c("b727").findIndex,a=c("44d2"),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)}}]);
//# sourceMappingURL=chunk-7bcd9910.9aa58de6.js.map