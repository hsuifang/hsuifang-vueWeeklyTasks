{"version":3,"sources":["webpack:///./src/views/User/Cart.vue","webpack:///./src/views/User/Cart.vue?02ee","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","role","scope","colspan","style","for","carts","length","type","disabled","loadingItem","pos","deleteAllCart","item","key","product_id","src","product","imageUrl","alt","width","height","title","category","coupon","code","price","qty","min","deleteItemFromCart","id","aria-describedby","couponCode","applyCoupn","apply","total","final","ref","requestOrder","errors","name","placeholder","rules","form","user","email","tel","address","cols","rows","message","data","final_total","usedCode","coupons","methods","fetchCartList","$vLoading","api","res","success","$vHttpsNotice","$vErrorNotice","updateCart","cartId","productId","toggleLoding","$router","push","this","created","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-77f514c3.d1ac7a8a.js","sourcesContent":["<template>\n  <!-- 購物車 -->\n  <div class=\"pb-5\">\n    <div class=\"container\">\n      <div class=\"row mt-4 mb-4 p-5 bg-white rounded shadow-sm\">\n        <div class=\"col-lg-12\">\n          <div class=\"text-end mb-2\" v-if=\"carts.length > 0\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-secondary rounded-pill px-3\"\n              :disabled=\"loadingItem.pos === 'delAll'\"\n              @click=\"deleteAllCart\"\n            >\n              刪除全部\n            </button>\n            <div\n              v-if=\"loadingItem.pos === 'delAll'\"\n              class=\"spinner-border spinner-border-sm position-absolute top-50 start-100\"\n              role=\"status\"\n            >\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n          <div class=\"table-responsive\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\" class=\"border-0 bg-light\">\n                    <p>名稱</p>\n                  </th>\n                  <th scope=\"col\" class=\"border-0 bg-light\">\n                    <p>金額</p>\n                  </th>\n                  <th scope=\"col\" class=\"border-0 bg-light\">\n                    <p>數量</p>\n                  </th>\n                  <th scope=\"col\" class=\"border-0 bg-light\">\n                    <p>刪除</p>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <template v-if=\"carts.length > 0\">\n                  <tr v-for=\"item in carts\" :key=\"item.product_id\">\n                    <th scope=\"row\">\n                      <div class=\"p-2\">\n                        <img\n                          :src=\"item.product.imageUrl\"\n                          alt=\"\"\n                          width=\"70\"\n                          height=\"70\"\n                          class=\"img-fluid rounded shadow-sm me-3\"\n                          style=\"height: 70px; object-fit: contain\"\n                        />\n                        <div class=\"ml-3 d-inline-block align-middle\">\n                          <h5 class=\"mb-0 text-dark\">{{ item.product.title }}</h5>\n                          <p class=\"text-muted font-weight-normal font-italic mb-2\">\n                            類別: {{ item.product.category }}\n                          </p>\n                          <div v-if=\"item.coupon\" class=\"text-muted fs-8\">\n                            優惠券:\n                            <span class=\"bg-primary text-white rounded-pill py-1 px-2 fs-8\">\n                              {{ item.coupon.code }}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </th>\n                    <td class=\"align-middle\">\n                      <strong>NT$ {{ item.product.price }}</strong>\n                    </td>\n                    <td class=\"align-middle\">\n                      <input\n                        type=\"number\"\n                        class=\"form-control\"\n                        v-model.number=\"item.qty\"\n                        style=\"width: 80px\"\n                        min=\"1\"\n                        @change=\"\n                          updateCart({\n                            cartId: item.id,\n                            productId: item.product_id,\n                            qty: item.qty,\n                          })\n                        \"\n                      />\n                    </td>\n                    <td class=\"align-middle\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-danger\"\n                        @click=\"deleteItemFromCart({ cartId: item.id })\"\n                      >\n                        <i class=\"fa fa-trash\"></i>\n                      </button>\n                      <div\n                        v-if=\"loadingItem.pos === 'delItem' && loadingItem.id === item.id\"\n                        class=\"position-absolute top-50 start-50\"\n                      >\n                        <div class=\"spinner-border spinner-border-sm\" role=\"status\">\n                          <span class=\"visually-hidden\">Loading...</span>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                </template>\n                <tr v-else>\n                  <td colspan=\"4\" class=\"text-center\">目前無購物資料</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n      <!-- 個人資訊 -->\n      <div class=\"row p-5 bg-white rounded shadow-sm\">\n        <div class=\"col-lg-6\">\n          <h6 class=\"bg-light rounded-pill px-4 py-3 fw-bold text-secondary\">優惠碼</h6>\n\n          <div class=\"p-2\">\n            <div class=\"input-group mb-4 border rounded-pill p-2\">\n              <input\n                type=\"text\"\n                aria-describedby=\"button-addon3\"\n                class=\"form-control border-0\"\n                v-model=\"couponCode\"\n              />\n              <div\n                v-if=\"loadingItem.pos === 'applyCoupon'\"\n                class=\"position-absolute top-50 start-100\"\n                style=\"transform: translateX(-10px)\"\n              >\n                <div class=\"spinner-border spinner-border-sm\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n              <div class=\"input-group-append border-0\">\n                <button\n                  id=\"button-addon3\"\n                  type=\"button\"\n                  class=\"btn btn-secondary text-white px-4 rounded-pill\"\n                  @click=\"applyCoupn\"\n                >\n                  <i class=\"fa fa-gift me-2\"></i>使用優惠券\n                </button>\n              </div>\n            </div>\n          </div>\n          <h6 class=\"bg-light rounded-pill px-4 py-3 fw-bold text-secondary\">金額明細</h6>\n\n          <div class=\"pt-0 p-4\">\n            <ul class=\"list-unstyled mb-4\">\n              <li class=\"d-flex justify-content-between py-3 border-bottom\">\n                <strong class=\"text-muted\">購買</strong><strong>NT$ {{ price.total }}</strong>\n              </li>\n              <li class=\"d-flex justify-content-between py-3 border-bottom\">\n                <strong class=\"text-muted\">折扣</strong\n                ><strong>${{ price.final - price.total }}</strong>\n              </li>\n              <li class=\"d-flex justify-content-between py-3 border-bottom\">\n                <strong class=\"text-muted\">總共</strong>\n                <h5 class=\"fw-bold\">NT$ {{ price.final }}</h5>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"col-lg-6\">\n          <h6 class=\"bg-light rounded-pill px-4 py-3 fw-bold text-secondary\">購買者資訊</h6>\n          <v-form ref=\"form\" v-slot=\"{ errors }\" @submit=\"requestOrder\" class=\"px-3\">\n            <div class=\"mb-3\">\n              <label for=\"name\" class=\"form-label\">姓名</label>\n              <v-field\n                id=\"name\"\n                name=\"姓名\"\n                type=\"email\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['姓名'] }\"\n                placeholder=\"請輸入姓名\"\n                rules=\"required\"\n                v-model=\"form.user.name\"\n              ></v-field>\n              <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"email\" class=\"form-label\">Email</label>\n              <v-field\n                id=\"email\"\n                name=\"Email\"\n                type=\"email\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['Email'] }\"\n                placeholder=\"請輸入Email\"\n                rules=\"email|required\"\n                v-model=\"form.user.email\"\n              ></v-field>\n              <error-message name=\"Email\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"tel\" class=\"form-label\">電話</label>\n              <v-field\n                id=\"tel\"\n                name=\"電話\"\n                type=\"tel\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['電話'] }\"\n                placeholder=\"請輸入電話\"\n                rules=\"min:8|max:10|required\"\n                v-model=\"form.user.tel\"\n              ></v-field>\n              <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"address\" class=\"form-label\">地址</label>\n              <v-field\n                id=\"address\"\n                name=\"地址\"\n                type=\"text\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['地址'] }\"\n                placeholder=\"請輸入地址\"\n                rules=\"required\"\n                v-model=\"form.user.address\"\n              ></v-field>\n              <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"message\" class=\"form-label\">留言或備註</label>\n              <textarea\n                id=\"message\"\n                cols=\"30\"\n                rows=\"2\"\n                class=\"form-control\"\n                v-model=\"form.message\"\n              ></textarea>\n            </div>\n            <div class=\"text-end\">\n              <button\n                type=\"submit\"\n                class=\"btn btn-secondary rounded-pill py-2 px-4 text-white\"\n                :disabled=\"loadingItem.pos === 'requestOrder' || this.carts.length === 0\"\n              >\n                購買確認\n              </button>\n              <div\n                v-if=\"loadingItem.pos === 'requestOrder'\"\n                class=\"position-absolute top-50 start-100\"\n                style=\"transform: translateX(-10px)\"\n              >\n                <div class=\"spinner-border spinner-border-sm\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          </v-form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  apiGetCartList,\n  apiDeleteCart,\n  apiDeleteAllCart,\n  apiUpdateCart,\n  apiGenerateOrder,\n  apiApplyCoupon,\n} from '@/api';\n\nexport default {\n  data() {\n    return {\n      carts: [],\n      price: {\n        total: 0,\n        final_total: 0,\n      },\n      loadingItem: {\n        pos: '',\n        id: '',\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      couponCode: '',\n      usedCode: '',\n      coupons: [],\n    };\n  },\n  methods: {\n    async fetchCartList() {\n      this.$vLoading(true);\n      try {\n        const res = await apiGetCartList();\n        const { success, data } = res.data;\n        if (success) {\n          this.carts = data.carts;\n          this.price.total = data.total;\n          this.price.final = data.final_total;\n        } else {\n          this.$vHttpsNotice(res, '查看購物清單');\n        }\n      } catch (error) {\n        this.$vErrorNotice();\n      } finally {\n        this.$vLoading(false);\n      }\n    },\n    async updateCart({ cartId, productId, qty }) {\n      try {\n        const res = await apiUpdateCart({ cartId, productId, qty });\n        const { success } = res.data;\n        if (success) {\n          this.fetchCartList();\n        } else {\n          this.$vHttpsNotice(res, '修改購物車');\n        }\n      } catch (error) {\n        this.$vErrorNotice();\n      }\n    },\n    async deleteItemFromCart({ cartId }) {\n      this.toggleLoding({ pos: 'delItem', id: cartId });\n      try {\n        const res = await apiDeleteCart(cartId);\n        const { success } = res.data;\n        if (success) {\n          this.fetchCartList();\n        } else {\n          this.$vHttpsNotice(res, '刪除購物車項目');\n        }\n        this.toggleLoding({ pos: '', id: '' });\n      } catch (error) {\n        this.$vErrorNotice();\n      }\n    },\n    async deleteAllCart() {\n      try {\n        const res = await apiDeleteAllCart();\n        const { success } = res.data;\n        if (success) {\n          this.carts = [];\n          this.fetchCartList();\n        } else {\n          this.$vHttpsNotice(res, '刪除所有購物車');\n        }\n      } catch (error) {\n        this.$vErrorNotice();\n      }\n    },\n    async requestOrder() {\n      this.toggleLoding({ pos: 'requestOrder' });\n      try {\n        const res = await apiGenerateOrder({\n          user: this.form.user,\n          message: this.form.message,\n        });\n        const { success } = res.data;\n        if (success) {\n          this.$vHttpsNotice(res, '送出訂單');\n          this.$router.push('/');\n          // await this.fetchCartList();\n          // await this.$refs.form.resetForm(); // 記得要清data資料\n        } else {\n          this.$vHttpsNotice(res, '送出訂單');\n        }\n      } catch (error) {\n        this.$vErrorNotice();\n      } finally {\n        this.toggleLoding({ pos: '' });\n      }\n    },\n    async applyCoupn() {\n      this.toggleLoding({ pos: 'applyCoupon' });\n      try {\n        const res = await apiApplyCoupon(this.couponCode);\n        if (res.data.success) {\n          this.usedCode = this.couponCode;\n        }\n        this.couponCode = '';\n        this.$vHttpsNotice(res, '使用優惠券');\n      } catch (error) {\n        this.$vErrorNotice();\n      } finally {\n        this.toggleLoding({ pos: '' });\n      }\n    },\n    toggleLoding({ pos, id }) {\n      this.loadingItem.pos = pos;\n      this.loadingItem.id = id;\n    },\n  },\n  created() {\n    this.fetchCartList();\n  },\n};\n</script>\n","import { render } from \"./Cart.vue?vue&type=template&id=4787aba6\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}