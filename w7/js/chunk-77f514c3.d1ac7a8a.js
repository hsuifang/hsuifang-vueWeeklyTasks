(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77f514c3"],{9637:function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),a={class:"pb-5"},o={class:"container"},n={class:"row mt-4 mb-4 p-5 bg-white rounded shadow-sm"},s={class:"col-lg-12"},l={key:0,class:"text-end mb-2"},d={key:0,class:"spinner-border spinner-border-sm position-absolute top-50 start-100",role:"status"},i=Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),u={class:"table-responsive"},b={class:"table"},p=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"名稱")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"金額")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"數量")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"刪除")])])],-1),m={scope:"row"},j={class:"p-2"},O={class:"ml-3 d-inline-block align-middle"},f={class:"mb-0 text-dark"},g={class:"text-muted font-weight-normal font-italic mb-2"},v={key:0,class:"text-muted fs-8"},N=Object(r["createTextVNode"])(" 優惠券: "),V={class:"bg-primary text-white rounded-pill py-1 px-2 fs-8"},h={class:"align-middle"},y={class:"align-middle"},x={class:"align-middle"},k=Object(r["createVNode"])("i",{class:"fa fa-trash"},null,-1),w={key:0,class:"position-absolute top-50 start-50"},C=Object(r["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),I={key:1},B=Object(r["createVNode"])("td",{colspan:"4",class:"text-center"},"目前無購物資料",-1),$={class:"row p-5 bg-white rounded shadow-sm"},L={class:"col-lg-6"},q=Object(r["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"優惠碼",-1),R={class:"p-2"},E={class:"input-group mb-4 border rounded-pill p-2"},D={key:0,class:"position-absolute top-50 start-100",style:{transform:"translateX(-10px)"}},S=Object(r["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),U={class:"input-group-append border-0"},T=Object(r["createVNode"])("i",{class:"fa fa-gift me-2"},null,-1),H=Object(r["createTextVNode"])("使用優惠券 "),A=Object(r["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"金額明細",-1),_={class:"pt-0 p-4"},F={class:"list-unstyled mb-4"},M={class:"d-flex justify-content-between py-3 border-bottom"},J=Object(r["createVNode"])("strong",{class:"text-muted"},"購買",-1),X={class:"d-flex justify-content-between py-3 border-bottom"},z=Object(r["createVNode"])("strong",{class:"text-muted"},"折扣",-1),G={class:"d-flex justify-content-between py-3 border-bottom"},K=Object(r["createVNode"])("strong",{class:"text-muted"},"總共",-1),P={class:"fw-bold"},Q={class:"col-lg-6"},W=Object(r["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"購買者資訊",-1),Y={class:"mb-3"},Z=Object(r["createVNode"])("label",{for:"name",class:"form-label"},"姓名",-1),ee={class:"mb-3"},te=Object(r["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),ce={class:"mb-3"},re=Object(r["createVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),ae={class:"mb-3"},oe=Object(r["createVNode"])("label",{for:"address",class:"form-label"},"地址",-1),ne={class:"mb-3"},se=Object(r["createVNode"])("label",{for:"message",class:"form-label"},"留言或備註",-1),le={class:"text-end"},de={key:0,class:"position-absolute top-50 start-100",style:{transform:"translateX(-10px)"}},ie=Object(r["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1);function ue(e,t,c,ue,be,pe){var me=this,je=Object(r["resolveComponent"])("v-field"),Oe=Object(r["resolveComponent"])("error-message"),fe=Object(r["resolveComponent"])("v-form");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("div",n,[Object(r["createVNode"])("div",s,[be.carts.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-pill px-3",disabled:"delAll"===be.loadingItem.pos,onClick:t[1]||(t[1]=function(){return pe.deleteAllCart&&pe.deleteAllCart.apply(pe,arguments)})}," 刪除全部 ",8,["disabled"]),"delAll"===be.loadingItem.pos?(Object(r["openBlock"])(),Object(r["createBlock"])("div",d,[i])):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("table",b,[p,Object(r["createVNode"])("tbody",null,[be.carts.length>0?(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],{key:0},Object(r["renderList"])(be.carts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.product_id},[Object(r["createVNode"])("th",m,[Object(r["createVNode"])("div",j,[Object(r["createVNode"])("img",{src:e.product.imageUrl,alt:"",width:"70",height:"70",class:"img-fluid rounded shadow-sm me-3",style:{height:"70px","object-fit":"contain"}},null,8,["src"]),Object(r["createVNode"])("div",O,[Object(r["createVNode"])("h5",f,Object(r["toDisplayString"])(e.product.title),1),Object(r["createVNode"])("p",g," 類別: "+Object(r["toDisplayString"])(e.product.category),1),e.coupon?(Object(r["openBlock"])(),Object(r["createBlock"])("div",v,[N,Object(r["createVNode"])("span",V,Object(r["toDisplayString"])(e.coupon.code),1)])):Object(r["createCommentVNode"])("",!0)])])]),Object(r["createVNode"])("td",h,[Object(r["createVNode"])("strong",null,"NT$ "+Object(r["toDisplayString"])(e.product.price),1)]),Object(r["createVNode"])("td",y,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},style:{width:"80px"},min:"1",onChange:function(t){return pe.updateCart({cartId:e.id,productId:e.product_id,qty:e.qty})}},null,40,["onUpdate:modelValue","onChange"]),[[r["vModelText"],e.qty,void 0,{number:!0}]])]),Object(r["createVNode"])("td",x,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return pe.deleteItemFromCart({cartId:e.id})}},[k],8,["onClick"]),"delItem"===be.loadingItem.pos&&be.loadingItem.id===e.id?(Object(r["openBlock"])(),Object(r["createBlock"])("div",w,[C])):Object(r["createCommentVNode"])("",!0)])])})),128)):(Object(r["openBlock"])(),Object(r["createBlock"])("tr",I,[B]))])])])])]),Object(r["createVNode"])("div",$,[Object(r["createVNode"])("div",L,[q,Object(r["createVNode"])("div",R,[Object(r["createVNode"])("div",E,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text","aria-describedby":"button-addon3",class:"form-control border-0","onUpdate:modelValue":t[2]||(t[2]=function(e){return be.couponCode=e})},null,512),[[r["vModelText"],be.couponCode]]),"applyCoupon"===be.loadingItem.pos?(Object(r["openBlock"])(),Object(r["createBlock"])("div",D,[S])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",U,[Object(r["createVNode"])("button",{id:"button-addon3",type:"button",class:"btn btn-secondary text-white px-4 rounded-pill",onClick:t[3]||(t[3]=function(){return pe.applyCoupn&&pe.applyCoupn.apply(pe,arguments)})},[T,H])])])]),A,Object(r["createVNode"])("div",_,[Object(r["createVNode"])("ul",F,[Object(r["createVNode"])("li",M,[J,Object(r["createVNode"])("strong",null,"NT$ "+Object(r["toDisplayString"])(be.price.total),1)]),Object(r["createVNode"])("li",X,[z,Object(r["createVNode"])("strong",null,"$"+Object(r["toDisplayString"])(be.price.final-be.price.total),1)]),Object(r["createVNode"])("li",G,[K,Object(r["createVNode"])("h5",P,"NT$ "+Object(r["toDisplayString"])(be.price.final),1)])])])]),Object(r["createVNode"])("div",Q,[W,Object(r["createVNode"])(fe,{ref:"form",onSubmit:pe.requestOrder,class:"px-3"},{default:Object(r["withCtx"])((function(e){var c=e.errors;return[Object(r["createVNode"])("div",Y,[Z,Object(r["createVNode"])(je,{id:"name",name:"姓名",type:"email",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:be.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return be.form.user.name=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(Oe,{name:"姓名",class:"invalid-feedback"})]),Object(r["createVNode"])("div",ee,[te,Object(r["createVNode"])(je,{id:"email",name:"Email",type:"email",class:["form-control",{"is-invalid":c["Email"]}],placeholder:"請輸入Email",rules:"email|required",modelValue:be.form.user.email,"onUpdate:modelValue":t[5]||(t[5]=function(e){return be.form.user.email=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(Oe,{name:"Email",class:"invalid-feedback"})]),Object(r["createVNode"])("div",ce,[re,Object(r["createVNode"])(je,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",rules:"min:8|max:10|required",modelValue:be.form.user.tel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return be.form.user.tel=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(Oe,{name:"電話",class:"invalid-feedback"})]),Object(r["createVNode"])("div",ae,[oe,Object(r["createVNode"])(je,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:be.form.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return be.form.user.address=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(Oe,{name:"地址",class:"invalid-feedback"})]),Object(r["createVNode"])("div",ne,[se,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"message",cols:"30",rows:"2",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=function(e){return be.form.message=e})},null,512),[[r["vModelText"],be.form.message]])]),Object(r["createVNode"])("div",le,[Object(r["createVNode"])("button",{type:"submit",class:"btn btn-secondary rounded-pill py-2 px-4 text-white",disabled:"requestOrder"===be.loadingItem.pos||0===me.carts.length}," 購買確認 ",8,["disabled"]),"requestOrder"===be.loadingItem.pos?(Object(r["openBlock"])(),Object(r["createBlock"])("div",de,[ie])):Object(r["createCommentVNode"])("",!0)])]})),_:1},8,["onSubmit"])])])])])}var be=c("1da1"),pe=(c("96cf"),c("365c")),me={data:function(){return{carts:[],price:{total:0,final_total:0},loadingItem:{pos:"",id:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},couponCode:"",usedCode:"",coupons:[]}},methods:{fetchCartList:function(){var e=this;return Object(be["a"])(regeneratorRuntime.mark((function t(){var c,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$vLoading(!0),t.prev=1,t.next=4,Object(pe["n"])();case 4:c=t.sent,r=c.data,a=r.success,o=r.data,a?(e.carts=o.carts,e.price.total=o.total,e.price.final=o.final_total):e.$vHttpsNotice(c,"查看購物清單"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$vErrorNotice();case 12:return t.prev=12,e.$vLoading(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},updateCart:function(e){var t=this;return Object(be["a"])(regeneratorRuntime.mark((function c(){var r,a,o,n,s;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return r=e.cartId,a=e.productId,o=e.qty,c.prev=1,c.next=4,Object(pe["u"])({cartId:r,productId:a,qty:o});case 4:n=c.sent,s=n.data.success,s?t.fetchCartList():t.$vHttpsNotice(n,"修改購物車"),c.next=12;break;case 9:c.prev=9,c.t0=c["catch"](1),t.$vErrorNotice();case 12:case"end":return c.stop()}}),c,null,[[1,9]])})))()},deleteItemFromCart:function(e){var t=this;return Object(be["a"])(regeneratorRuntime.mark((function c(){var r,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return r=e.cartId,t.toggleLoding({pos:"delItem",id:r}),c.prev=2,c.next=5,Object(pe["j"])(r);case 5:a=c.sent,o=a.data.success,o?t.fetchCartList():t.$vHttpsNotice(a,"刪除購物車項目"),t.toggleLoding({pos:"",id:""}),c.next=14;break;case 11:c.prev=11,c.t0=c["catch"](2),t.$vErrorNotice();case 14:case"end":return c.stop()}}),c,null,[[2,11]])})))()},deleteAllCart:function(){var e=this;return Object(be["a"])(regeneratorRuntime.mark((function t(){var c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(pe["i"])();case 3:c=t.sent,r=c.data.success,r?(e.carts=[],e.fetchCartList()):e.$vHttpsNotice(c,"刪除所有購物車"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$vErrorNotice();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},requestOrder:function(){var e=this;return Object(be["a"])(regeneratorRuntime.mark((function t(){var c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.toggleLoding({pos:"requestOrder"}),t.prev=1,t.next=4,Object(pe["l"])({user:e.form.user,message:e.form.message});case 4:c=t.sent,r=c.data.success,r?(e.$vHttpsNotice(c,"送出訂單"),e.$router.push("/")):e.$vHttpsNotice(c,"送出訂單"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$vErrorNotice();case 12:return t.prev=12,e.toggleLoding({pos:""}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},applyCoupn:function(){var e=this;return Object(be["a"])(regeneratorRuntime.mark((function t(){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.toggleLoding({pos:"applyCoupon"}),t.prev=1,t.next=4,Object(pe["b"])(e.couponCode);case 4:c=t.sent,c.data.success&&(e.usedCode=e.couponCode),e.couponCode="",e.$vHttpsNotice(c,"使用優惠券"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$vErrorNotice();case 13:return t.prev=13,e.toggleLoding({pos:""}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()},toggleLoding:function(e){var t=e.pos,c=e.id;this.loadingItem.pos=t,this.loadingItem.id=c}},created:function(){this.fetchCartList()}};me.render=ue;t["default"]=me},b0c0:function(e,t,c){var r=c("83ab"),a=c("9bf2").f,o=Function.prototype,n=o.toString,s=/^\s*function ([^ (]*)/,l="name";r&&!(l in o)&&a(o,l,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-77f514c3.d1ac7a8a.js.map