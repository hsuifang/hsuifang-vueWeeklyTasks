{"version":3,"sources":["webpack:///./src/views/Admin.vue","webpack:///./src/views/Admin.vue?7d98"],"names":["class","to","href","handleLogout","isAuthenticated","name","data","methods","checkLogin","$vLoading","token","getToken","api","res","success","$router","push","$vErrorNotice","removeToken","created","this","render"],"mappings":"0IACOA,MAAM,kB,GACLA,MAAM,iD,GACJA,MAAM,Y,+BAAgD,Q,GACtDA,MAAM,Y,+BAC2C,U,GAEjDA,MAAM,Y,+BACyC,Q,GAE/CA,MAAM,Y,+BAC0C,S,GAEhDA,MAAM,Y,0JAZd,yBAiBM,MAjBN,EAiBM,CAhBJ,yBAcK,KAdL,EAcK,CAbH,yBAAiF,KAAjF,EAAiF,CAA5D,yBAAuD,GAA1CA,MAAM,WAAWC,GAAG,K,+BAAI,iBAAI,C,cAC9D,yBAEK,KAFL,EAEK,CADH,yBAAuE,GAA1DD,MAAM,WAAWC,GAAG,mB,+BAAkB,iBAAM,C,cAE3D,yBAEK,KAFL,EAEK,CADH,yBAAmE,GAAtDD,MAAM,WAAWC,GAAG,iB,+BAAgB,iBAAI,C,cAEvD,yBAEK,KAFL,EAEK,CADH,yBAAqE,GAAxDD,MAAM,WAAWC,GAAG,kB,+BAAiB,iBAAK,C,cAEzD,yBAEK,KAFL,EAEK,CADH,yBAAiE,KAA9DC,KAAK,IAAIF,MAAM,WAAY,QAAK,0DAAU,EAAAG,cAAA,EAAAA,aAAA,qBAAY,eAAE,UAG5C,EAAAC,iB,yBAAnB,yBAAkD,Y,6FAOvC,GACbC,KAAM,YACNC,KAFa,WAGX,MAAO,CACLF,iBAAiB,IAGrBG,QAAS,CACDC,WADC,WACY,qKACjB,EAAKC,WAAU,GACTC,EAAQ,OAAIC,YACdD,EAHa,0CAKK,OAAAE,EAAA,MAAaF,GALlB,OAKPG,EALO,OAMLC,EAAYD,EAAIP,KAAhBQ,QACJA,GACF,EAAKV,iBAAkB,EACvB,EAAKW,QAAQC,KAAK,oBAElB,EAAKD,QAAQC,KAAK,UAXP,qDAcb,EAAKC,gBAdQ,yBAgBb,EAAKR,WAAU,GAhBF,6CAmBf,EAAKM,QAAQC,KAAK,UAClB,EAAKP,WAAU,GApBA,mEAwBbN,aAzBC,WAyBc,qKACnB,EAAKM,WAAU,GADI,kBAGC,OAAAG,EAAA,QAHD,OAGXC,EAHW,OAIbA,EAAIP,KAAKQ,UACX,OAAII,cACJ,EAAKd,iBAAkB,EACvB,EAAKW,QAAQC,KAAK,WAPH,mDAUjB,EAAKC,gBAVY,yBAYjB,EAAKR,WAAU,GAZE,gFAgBvBU,QAhDa,WAiDXC,KAAKZ,eCtET,EAAOa,OAASA,EAED","file":"js/chunk-2d0b9d35.459b0a2d.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <ul class=\"nav justify-content-center align-items-center\">\n      <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/\">回到前台</router-link></li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/products\">後台產品列表</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/orders\">後台訂單</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/coupons\">後台優惠券</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <a href=\"#\" class=\"nav-link\" @click.prevent=\"handleLogout\">登出</a>\n      </li>\n    </ul>\n    <router-view v-if=\"isAuthenticated\"></router-view>\n  </div>\n</template>\n<script>\nimport { apiCheckUser, apiLogout } from '@/api';\nimport JWT from '@/api/cookies';\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      isAuthenticated: false,\n    };\n  },\n  methods: {\n    async checkLogin() {\n      this.$vLoading(true);\n      const token = JWT.getToken();\n      if (token) {\n        try {\n          const res = await apiCheckUser(token);\n          const { success } = res.data;\n          if (success) {\n            this.isAuthenticated = true;\n            this.$router.push('/admin/products');\n          } else {\n            this.$router.push('/login');\n          }\n        } catch (error) {\n          this.$vErrorNotice();\n        } finally {\n          this.$vLoading(false);\n        }\n      } else {\n        this.$router.push('/login');\n        this.$vLoading(false);\n      }\n    },\n    // logout\n    async handleLogout() {\n      this.$vLoading(true);\n      try {\n        const res = await apiLogout();\n        if (res.data.success) {\n          JWT.removeToken();\n          this.isAuthenticated = false;\n          this.$router.push('/login');\n        }\n      } catch (error) {\n        this.$vErrorNotice();\n      } finally {\n        this.$vLoading(false);\n      }\n    },\n  },\n  created() {\n    this.checkLogin();\n  },\n};\n</script>\n","import { render } from \"./Admin.vue?vue&type=template&id=244f4fd3\"\nimport script from \"./Admin.vue?vue&type=script&lang=js\"\nexport * from \"./Admin.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}