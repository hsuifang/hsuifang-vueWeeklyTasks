{"version":3,"sources":["webpack:///./src/views/Admin.vue","webpack:///./src/views/Admin.vue?9254"],"names":["class","to","href","handleLogout","isAuthenticated","name","data","methods","checkLogin","emitter","emit","isLoading","token","getToken","api","then","res","success","$router","push","this","removeToken","console","dir","created","render"],"mappings":"0IACOA,MAAM,kB,GACLA,MAAM,iD,GACJA,MAAM,Y,+BAAgD,Q,GACtDA,MAAM,Y,+BAC2C,U,GAEjDA,MAAM,Y,+BACyC,Q,GAE/CA,MAAM,Y,0JATd,yBAcM,MAdN,EAcM,CAbJ,yBAWK,KAXL,EAWK,CAVH,yBAAiF,KAAjF,EAAiF,CAA5D,yBAAuD,GAA1CA,MAAM,WAAWC,GAAG,K,+BAAI,iBAAI,C,cAC9D,yBAEK,KAFL,EAEK,CADH,yBAAuE,GAA1DD,MAAM,WAAWC,GAAG,mB,+BAAkB,iBAAM,C,cAE3D,yBAEK,KAFL,EAEK,CADH,yBAAmE,GAAtDD,MAAM,WAAWC,GAAG,iB,+BAAgB,iBAAI,C,cAEvD,yBAEK,KAFL,EAEK,CADH,yBAAiE,KAA9DC,KAAK,IAAIF,MAAM,WAAY,QAAK,0DAAU,EAAAG,cAAA,EAAAA,aAAA,qBAAY,eAAE,UAG5C,EAAAC,iB,yBAAnB,yBAAkD,Y,yGAQvC,GACbC,KAAM,YACNC,KAFa,WAGX,MAAO,CACLF,iBAAiB,IAGrBG,QAAS,CACPC,WADO,WACM,WACXC,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IACvC,IAAMC,EAAQ,OAAIC,WACdD,EACF,OAAAE,EAAA,MAAaF,GAAOG,MAAK,SAACC,GACxB,IAAQC,EAAYD,EAAIV,KAAhBW,QACJA,GACF,EAAKb,iBAAkB,EACvB,EAAKc,QAAQC,KAAK,mBAClBV,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,KAEvC,EAAKO,QAAQC,KAAK,aAItBC,KAAKF,QAAQC,KAAK,UAEpBV,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,KAGnCR,aArBC,WAqBc,qKACnBM,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IADpB,kBAGC,OAAAG,EAAA,QAHD,OAGXE,EAHW,OAIbA,EAAIV,KAAKW,UACX,OAAII,cACJ,EAAKjB,iBAAkB,EACvB,EAAKc,QAAQC,KAAK,WAPH,mDAUjBG,QAAQC,IAAR,MAViB,yBAYjBd,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IAZtB,gFAgBvBa,QA5Ca,WA6CXJ,KAAKZ,eChET,EAAOiB,OAASA,EAED","file":"js/chunk-2d0b9d35.7b9cb177.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <ul class=\"nav justify-content-center align-items-center\">\n      <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/\">回到前台</router-link></li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/products\">後台產品列表</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/orders\">後台訂單</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <a href=\"#\" class=\"nav-link\" @click.prevent=\"handleLogout\">登出</a>\n      </li>\n    </ul>\n    <router-view v-if=\"isAuthenticated\"></router-view>\n  </div>\n</template>\n<script>\nimport { apiCheckUser, apiLogout } from '@/api';\nimport JWT from '@/api/cookies';\nimport emitter from '@/services/emitter';\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      isAuthenticated: false,\n    };\n  },\n  methods: {\n    checkLogin() {\n      emitter.emit('v-loading', { isLoading: true });\n      const token = JWT.getToken();\n      if (token) {\n        apiCheckUser(token).then((res) => {\n          const { success } = res.data;\n          if (success) {\n            this.isAuthenticated = true;\n            this.$router.push('/admin/products');\n            emitter.emit('v-loading', { isLoading: false });\n          } else {\n            this.$router.push('/login');\n          }\n        });\n      } else {\n        this.$router.push('/login');\n      }\n      emitter.emit('v-loading', { isLoading: false });\n    },\n    // logout\n    async handleLogout() {\n      emitter.emit('v-loading', { isLoading: true });\n      try {\n        const res = await apiLogout();\n        if (res.data.success) {\n          JWT.removeToken();\n          this.isAuthenticated = false;\n          this.$router.push('/login');\n        }\n      } catch (error) {\n        console.dir(error);\n      } finally {\n        emitter.emit('v-loading', { isLoading: false });\n      }\n    },\n  },\n  created() {\n    this.checkLogin();\n  },\n};\n</script>\n","import { render } from \"./Admin.vue?vue&type=template&id=6907818e\"\nimport script from \"./Admin.vue?vue&type=script&lang=js\"\nexport * from \"./Admin.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}