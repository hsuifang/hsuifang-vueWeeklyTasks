{"version":3,"sources":["webpack:///./src/views/Admin.vue","webpack:///./src/views/Admin.vue?9254"],"names":["class","to","href","handleLogout","isAuthenticated","name","data","methods","checkLogin","emitter","emit","isLoading","token","getToken","api","res","success","$router","push","console","log","removeToken","dir","created","this","render"],"mappings":"0IACOA,MAAM,kB,GACLA,MAAM,iD,GACJA,MAAM,Y,+BAAgD,Q,GACtDA,MAAM,Y,+BAC2C,U,GAEjDA,MAAM,Y,+BACyC,Q,GAE/CA,MAAM,Y,0JATd,yBAcM,MAdN,EAcM,CAbJ,yBAWK,KAXL,EAWK,CAVH,yBAAiF,KAAjF,EAAiF,CAA5D,yBAAuD,GAA1CA,MAAM,WAAWC,GAAG,K,+BAAI,iBAAI,C,cAC9D,yBAEK,KAFL,EAEK,CADH,yBAAuE,GAA1DD,MAAM,WAAWC,GAAG,mB,+BAAkB,iBAAM,C,cAE3D,yBAEK,KAFL,EAEK,CADH,yBAAmE,GAAtDD,MAAM,WAAWC,GAAG,iB,+BAAgB,iBAAI,C,cAEvD,yBAEK,KAFL,EAEK,CADH,yBAAiE,KAA9DC,KAAK,IAAIF,MAAM,WAAY,QAAK,0DAAU,EAAAG,cAAA,EAAAA,aAAA,qBAAY,eAAE,UAG5C,EAAAC,iB,yBAAnB,yBAAkD,Y,yGAQvC,GACbC,KAAM,YACNC,KAFa,WAGX,MAAO,CACLF,iBAAiB,IAGrBG,QAAS,CACDC,WADC,WACY,qKACjBC,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IACjCC,EAAQ,OAAIC,YACdD,EAHa,0CAKK,OAAAE,EAAA,MAAaF,GALlB,OAKPG,EALO,OAMLC,EAAYD,EAAIT,KAAhBU,QACJA,GACF,EAAKZ,iBAAkB,EACvB,EAAKa,QAAQC,KAAK,oBAElB,EAAKD,QAAQC,KAAK,UAXP,qDAcbC,QAAQC,IAAR,MAda,yBAgBbX,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IAhB1B,6CAmBf,EAAKM,QAAQC,KAAK,UAClBT,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IApBxB,mEAwBbR,aAzBC,WAyBc,qKACnBM,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IADpB,kBAGC,OAAAG,EAAA,QAHD,OAGXC,EAHW,OAIbA,EAAIT,KAAKU,UACX,OAAIK,cACJ,EAAKjB,iBAAkB,EACvB,EAAKa,QAAQC,KAAK,WAPH,mDAUjBC,QAAQG,IAAR,MAViB,yBAYjBb,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IAZtB,gFAgBvBY,QAhDa,WAiDXC,KAAKhB,eCpET,EAAOiB,OAASA,EAED","file":"js/chunk-2d0b9d35.61998f7e.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <ul class=\"nav justify-content-center align-items-center\">\n      <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/\">回到前台</router-link></li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/products\">後台產品列表</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <router-link class=\"nav-link\" to=\"/admin/orders\">後台訂單</router-link>\n      </li>\n      <li class=\"nav-item\">\n        <a href=\"#\" class=\"nav-link\" @click.prevent=\"handleLogout\">登出</a>\n      </li>\n    </ul>\n    <router-view v-if=\"isAuthenticated\"></router-view>\n  </div>\n</template>\n<script>\nimport { apiCheckUser, apiLogout } from '@/api';\nimport JWT from '@/api/cookies';\nimport emitter from '@/services/emitter';\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      isAuthenticated: false,\n    };\n  },\n  methods: {\n    async checkLogin() {\n      emitter.emit('v-loading', { isLoading: true });\n      const token = JWT.getToken();\n      if (token) {\n        try {\n          const res = await apiCheckUser(token);\n          const { success } = res.data;\n          if (success) {\n            this.isAuthenticated = true;\n            this.$router.push('/admin/products');\n          } else {\n            this.$router.push('/login');\n          }\n        } catch (error) {\n          console.log(error);\n        } finally {\n          emitter.emit('v-loading', { isLoading: false });\n        }\n      } else {\n        this.$router.push('/login');\n        emitter.emit('v-loading', { isLoading: false });\n      }\n    },\n    // logout\n    async handleLogout() {\n      emitter.emit('v-loading', { isLoading: true });\n      try {\n        const res = await apiLogout();\n        if (res.data.success) {\n          JWT.removeToken();\n          this.isAuthenticated = false;\n          this.$router.push('/login');\n        }\n      } catch (error) {\n        console.dir(error);\n      } finally {\n        emitter.emit('v-loading', { isLoading: false });\n      }\n    },\n  },\n  created() {\n    this.checkLogin();\n  },\n};\n</script>\n","import { render } from \"./Admin.vue?vue&type=template&id=4799f8d5\"\nimport script from \"./Admin.vue?vue&type=script&lang=js\"\nexport * from \"./Admin.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}