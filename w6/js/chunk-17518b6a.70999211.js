(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17518b6a"],{"7b6e":function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),r={class:"pb-5"},o={class:"container"},s={class:"row mt-4 mb-4 p-5 bg-white rounded shadow-sm"},l={class:"col-lg-12"},n={key:0,class:"text-end mb-2"},d={key:0,class:"spinner-border spinner-border-sm position-absolute top-50 start-100",role:"status"},i=Object(c["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),b={class:"table-responsive"},u={class:"table"},m=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(c["createVNode"])("p",null,"名稱")]),Object(c["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(c["createVNode"])("p",null,"金額")]),Object(c["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(c["createVNode"])("p",null,"數量")]),Object(c["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(c["createVNode"])("p",null,"刪除")])])],-1),p={scope:"row"},g={class:"p-2"},O={class:"ml-3 d-inline-block align-middle"},j={class:"mb-0 text-dark"},f={class:"text-muted font-weight-normal font-italic"},h={class:"align-middle"},V={class:"align-middle"},v={class:"align-middle"},N=Object(c["createVNode"])("i",{class:"fa fa-trash"},null,-1),w={key:0,class:"position-absolute top-50 start-50"},y=Object(c["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(c["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),k={key:1},x=Object(c["createVNode"])("td",{colspan:"4",class:"text-center"},"目前無購物資料",-1),C={class:"row p-5 bg-white rounded shadow-sm"},I={class:"col-lg-6"},B=Object(c["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"金額明細",-1),L={class:"p-4"},q={class:"list-unstyled mb-4"},S={class:"d-flex justify-content-between py-3 border-bottom"},R=Object(c["createVNode"])("strong",{class:"text-muted"},"購買",-1),D=Object(c["createVNode"])("li",{class:"d-flex justify-content-between py-3 border-bottom"},[Object(c["createVNode"])("strong",{class:"text-muted"},"折扣"),Object(c["createVNode"])("strong",null,"$0.00")],-1),U={class:"d-flex justify-content-between py-3 border-bottom"},M=Object(c["createVNode"])("strong",{class:"text-muted"},"總共",-1),T={class:"fw-bold"},A={class:"col-lg-6"},E=Object(c["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"購買者資訊",-1),F={class:"mb-3"},$=Object(c["createVNode"])("label",{for:"name",class:"form-label"},"姓名",-1),_={class:"mb-3"},J=Object(c["createVNode"])("label",{for:"name",class:"form-label"},"Email",-1),X={class:"mb-3"},z=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),G={class:"mb-3"},H=Object(c["createVNode"])("label",{for:"address",class:"form-label"},"地址",-1),K={class:"mb-3"},P=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言或備註",-1),Q={class:"text-end"},W={key:0,class:"position-absolute top-50 start-100",style:{transform:"translateX(-10px)"}},Y=Object(c["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(c["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1);function Z(e,t,a,Z,ee,te){var ae=this,ce=Object(c["resolveComponent"])("v-field"),re=Object(c["resolveComponent"])("error-message"),oe=Object(c["resolveComponent"])("v-form");return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])("div",o,[Object(c["withDirectives"])(Object(c["createVNode"])("div",{class:["alert",ee.info.status],role:"alert"},Object(c["toDisplayString"])(ee.info.msg),3),[[c["vShow"],ee.info.isShow]]),Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",l,[ee.carts.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])("div",n,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-pill px-3",disabled:"delAll"===ee.loadingItem.pos,onClick:t[1]||(t[1]=function(){return te.deleteAllCart&&te.deleteAllCart.apply(te,arguments)})}," 刪除全部 ",8,["disabled"]),"delAll"===ee.loadingItem.pos?(Object(c["openBlock"])(),Object(c["createBlock"])("div",d,[i])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",b,[Object(c["createVNode"])("table",u,[m,Object(c["createVNode"])("tbody",null,[ee.carts.length>0?(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(ee.carts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.product_id},[Object(c["createVNode"])("th",p,[Object(c["createVNode"])("div",g,[Object(c["createVNode"])("img",{src:e.product.imageUrl,alt:"",width:"70",height:"70",class:"img-fluid rounded shadow-sm me-3",style:{height:"70px","object-fit":"contain"}},null,8,["src"]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("h5",j,Object(c["toDisplayString"])(e.product.title),1),Object(c["createVNode"])("span",f,"類別: "+Object(c["toDisplayString"])(e.product.category),1)])])]),Object(c["createVNode"])("td",h,[Object(c["createVNode"])("strong",null,"NT$ "+Object(c["toDisplayString"])(e.product.price),1)]),Object(c["createVNode"])("td",V,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},style:{width:"80px"},onChange:function(t){return te.updateCart({cartId:e.id,productId:e.product_id,qty:e.qty})}},null,40,["onUpdate:modelValue","onChange"]),[[c["vModelText"],e.qty,void 0,{number:!0}]])]),Object(c["createVNode"])("td",v,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return te.deleteItemFromCart({cartId:e.id})}},[N],8,["onClick"]),"delItem"===ee.loadingItem.pos&&ee.loadingItem.id===e.id?(Object(c["openBlock"])(),Object(c["createBlock"])("div",w,[y])):Object(c["createCommentVNode"])("",!0)])])})),128)):(Object(c["openBlock"])(),Object(c["createBlock"])("tr",k,[x]))])])])])]),Object(c["createVNode"])("div",C,[Object(c["createVNode"])("div",I,[B,Object(c["createVNode"])("div",L,[Object(c["createVNode"])("ul",q,[Object(c["createVNode"])("li",S,[R,Object(c["createVNode"])("strong",null,"NT$ "+Object(c["toDisplayString"])(ee.price.total),1)]),D,Object(c["createVNode"])("li",U,[M,Object(c["createVNode"])("h5",T,"NT$ "+Object(c["toDisplayString"])(ee.price.final),1)])])])]),Object(c["createVNode"])("div",A,[E,Object(c["createVNode"])(oe,{ref:"form",onSubmit:te.requestOrder,class:"px-3"},{default:Object(c["withCtx"])((function(e){var a=e.errors;return[Object(c["createVNode"])("div",F,[$,Object(c["createVNode"])(ce,{id:"email",name:"姓名",type:"email",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:ee.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ee.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(re,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",_,[J,Object(c["createVNode"])(ce,{id:"name",name:"Email",type:"email",class:["form-control",{"is-invalid":a["Email"]}],placeholder:"請輸入Email",rules:"email|required",modelValue:ee.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(re,{name:"Email",class:"invalid-feedback"})]),Object(c["createVNode"])("div",X,[z,Object(c["createVNode"])(ce,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入電話",rules:"min:8|max:10|required",modelValue:ee.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ee.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(re,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",G,[H,Object(c["createVNode"])(ce,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:ee.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ee.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(re,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",K,[P,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"message",cols:"30",rows:"2",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=function(e){return ee.form.message=e})},null,512),[[c["vModelText"],ee.form.message]])]),Object(c["createVNode"])("div",Q,[Object(c["createVNode"])("button",{type:"submit",class:"btn btn-secondary rounded-pill py-2 px-4",disabled:"requestOrder"===ee.loadingItem.pos||0===ae.carts.length}," 購買確認 ",8,["disabled"]),"requestOrder"===ee.loadingItem.pos?(Object(c["openBlock"])(),Object(c["createBlock"])("div",W,[Y])):Object(c["createCommentVNode"])("",!0)])]})),_:1},8,["onSubmit"])])])])])}var ee=a("1da1"),te=(a("96cf"),a("365c")),ae=a("97e4"),ce={data:function(){return{carts:[],price:{total:0,final_total:0},loadingItem:{pos:"",id:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},info:{isShow:"",status:"",msg:""}}},methods:{fetchCartList:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,c,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ae["a"].emit("v-loading",{isLoading:!0}),t.prev=1,t.next=4,Object(te["i"])();case 4:a=t.sent,c=a.data,r=c.success,o=c.message,s=c.data,r?(e.carts=s.carts,e.price.total=s.total,e.price.final=s.final_total):alert(o),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:return t.prev=12,ae["a"].emit("v-loading",{isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},updateCart:function(e){var t=this;return Object(ee["a"])(regeneratorRuntime.mark((function a(){var c,r,o,s,l,n,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=e.cartId,r=e.productId,o=e.qty,a.prev=1,a.next=4,Object(te["n"])({cartId:c,productId:r,qty:o});case 4:s=a.sent,l=s.data,n=l.success,d=l.message,n?t.fetchCartList():t.showMsg({msg:d,status:"danger"}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},deleteItemFromCart:function(e){var t=this;return Object(ee["a"])(regeneratorRuntime.mark((function a(){var c,r,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=e.cartId,t.toggleLoding({pos:"delItem",id:c}),a.prev=2,a.next=5,Object(te["e"])(c);case 5:r=a.sent,o=r.data,s=o.success,l=o.message,s?t.fetchCartList():t.showMsg({msg:l,status:"danger"}),t.toggleLoding({pos:"",id:""}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},deleteAllCart:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,c,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(te["d"])();case 3:a=t.sent,c=a.data,r=c.success,o=c.message,r?e.carts=[]:e.showMsg({msg:o,status:"danger"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},requestOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,c,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.toggleLoding({pos:"requestOrder"}),t.prev=1,t.next=4,Object(te["g"])({user:e.form.user,message:e.form.message});case 4:a=t.sent,c=a.data,r=c.success,o=c.message,r?(e.fetchCartList(),e.$refs.form.resetForm()):e.showMsg({msg:o,status:"danger"}),e.toggleLoding({pos:""}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},toggleLoding:function(e){var t=e.pos,a=e.id;this.loadingItem.pos=t,this.loadingItem.id=a},showMsg:function(e){var t=this,a=e.msg,c=e.status;this.info.isShow=!0,this.info.status="alert-".concat(c),this.info.msg=a,setTimeout((function(){t.info.isShow=!1,t.info.status="",t.info.msg=""}),2e3)}},created:function(){this.fetchCartList()}};ce.render=Z;t["default"]=ce},b0c0:function(e,t,a){var c=a("83ab"),r=a("9bf2").f,o=Function.prototype,s=o.toString,l=/^\s*function ([^ (]*)/,n="name";c&&!(n in o)&&r(o,n,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-17518b6a.70999211.js.map