{"version":3,"sources":["webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b"],"names":["class","for","type","handleLogin","id","login","username","aria-describedby","required","password","data","methods","emitter","emit","isLoading","user","api","res","success","token","saveToken","$router","push","alert","console","dir","render"],"mappings":"0IACOA,MAAM,wB,GACJA,MAAM,8B,GACJA,MAAM,S,GACJA,MAAM,mB,GACJA,MAAM,a,EAEP,yBAA+B,MAA3BA,MAAM,eAAc,MAAE,G,GACrBA,MAAM,Q,EACT,yBAAwD,SAAjDC,IAAI,gBAAgBD,MAAM,cAAa,MAAE,G,GAU7CA,MAAM,Q,EACT,yBAA2D,SAApDC,IAAI,mBAAmBD,MAAM,cAAa,MAAE,G,EASrD,yBAAmF,UAA3EE,KAAK,SAASF,MAAM,6CAA4C,MAAE,G,wDA5BtF,yBAkCM,MAlCN,EAkCM,CAjCJ,yBAgCM,MAhCN,EAgCM,CA/BJ,yBA8BM,MA9BN,EA8BM,CA7BJ,yBA4BM,MA5BN,EA4BM,CA3BJ,yBA0BM,MA1BN,EA0BM,CAzBJ,yBAwBO,QAxBA,SAAM,0DAAU,EAAAG,aAAA,EAAAA,YAAA,qBAAW,cAAEC,GAAG,gB,CACrC,EACA,yBAUM,MAVN,EAUM,CATJ,E,4BACA,yBAOE,SANAA,GAAG,gBACHF,KAAK,QACLF,MAAM,e,qDACQ,EAAAK,MAAMC,SAAQ,IAC5BC,mBAAiB,YACjBC,SAAA,I,4BAFc,EAAAH,MAAMC,c,SAApB,QAKJ,yBASM,MATN,EASM,CARJ,E,4BACA,yBAME,SALAF,GAAG,mBACHF,KAAK,WACLF,MAAM,e,qDACQ,EAAAK,MAAMI,SAAQ,IAC5BD,SAAA,I,4BADc,EAAAH,MAAMI,c,SAApB,QAIJ,G,8EAaC,GACbC,KADa,WAEX,MAAO,CACLL,MAAO,CACLC,SAAU,GACVG,SAAU,MAIhBE,QAAS,CACDR,YADC,WACa,mLAClBS,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IADrB,WAGe,EAAKT,MAA5BC,EAHQ,EAGRA,SAAUG,EAHF,EAGEA,SACZM,EAAO,CAAET,WAAUG,YAJT,SAKE,OAAAO,EAAA,MAAUD,GALZ,OAKVE,EALU,SAMWA,EAAIP,KAAvBQ,EANQ,EAMRA,QAASC,EAND,EAMCA,MACbD,GACF,OAAIE,UAAUD,GACd,EAAKE,QAAQC,KAAK,oBAElBC,MAAM,QAXQ,qDAchBC,QAAQC,IAAR,MAdgB,yBAgBhBb,EAAA,KAAQC,KAAK,YAAa,CAAEC,WAAW,IAhBvB,kFCjDxB,EAAOY,OAASA,EAED","file":"js/chunk-2d2086b7.2c1cebb7.js","sourcesContent":["<template>\n  <div class=\"container min-vh-100\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-8\">\n        <div class=\"card top-50 p-3\">\n          <div class=\"card-body\">\n            <form @submit.prevent=\"handleLogin\" id=\"js-loginForm\">\n              <h3 class=\"text-center\">登入</h3>\n              <div class=\"mb-3\">\n                <label for=\"js-loginEmail\" class=\"form-label\">帳號</label>\n                <input\n                  id=\"js-loginEmail\"\n                  type=\"email\"\n                  class=\"form-control\"\n                  v-model.trim=\"login.username\"\n                  aria-describedby=\"emailHelp\"\n                  required\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"js-loginPassword\" class=\"form-label\">密碼</label>\n                <input\n                  id=\"js-loginPassword\"\n                  type=\"password\"\n                  class=\"form-control\"\n                  v-model.trim=\"login.password\"\n                  required\n                />\n              </div>\n              <button type=\"submit\" class=\"btn btn-primary text-white m-auto d-block\">送出</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport JWT from '@/api/cookies';\nimport { apiSignIn } from '@/api';\nimport emitter from '@/services/emitter';\n\nexport default {\n  data() {\n    return {\n      login: {\n        username: '',\n        password: '',\n      },\n    };\n  },\n  methods: {\n    async handleLogin() {\n      emitter.emit('v-loading', { isLoading: true });\n      try {\n        const { username, password } = this.login;\n        const user = { username, password };\n        const res = await apiSignIn(user);\n        const { success, token } = res.data;\n        if (success) {\n          JWT.saveToken(token);\n          this.$router.push('/admin/products');\n        } else {\n          alert('登入失敗');\n        }\n      } catch (error) {\n        console.dir(error);\n      } finally {\n        emitter.emit('v-loading', { isLoading: false });\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./Login.vue?vue&type=template&id=e008fec0\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}