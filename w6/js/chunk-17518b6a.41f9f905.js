(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17518b6a"],{"7b6e":function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("7a23"),c={class:"pb-5"},s={class:"container"},o={class:"row mt-4 mb-4 p-5 bg-white rounded shadow-sm"},n={class:"col-lg-12"},l={key:0,class:"text-end mb-2"},d={key:0,class:"spinner-border spinner-border-sm position-absolute top-50 start-100",role:"status"},i=Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),u={class:"table-responsive"},b={class:"table"},m=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"名稱")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"金額")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"數量")]),Object(r["createVNode"])("th",{scope:"col",class:"border-0 bg-light"},[Object(r["createVNode"])("p",null,"刪除")])])],-1),p={scope:"row"},g={class:"p-2"},O={class:"ml-3 d-inline-block align-middle"},j={class:"mb-0 text-dark"},f={class:"text-muted font-weight-normal font-italic"},h={class:"align-middle"},V={class:"align-middle"},v={class:"align-middle"},N=Object(r["createVNode"])("i",{class:"fa fa-trash"},null,-1),w={key:0,class:"position-absolute top-50 start-50"},y=Object(r["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),k={key:1},x=Object(r["createVNode"])("td",{colspan:"4",class:"text-center"},"目前無購物資料",-1),C={class:"row p-5 bg-white rounded shadow-sm"},I={class:"col-lg-6"},L=Object(r["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"金額明細",-1),B={class:"p-4"},q={class:"list-unstyled mb-4"},S={class:"d-flex justify-content-between py-3 border-bottom"},R=Object(r["createVNode"])("strong",{class:"text-muted"},"購買",-1),D=Object(r["createVNode"])("li",{class:"d-flex justify-content-between py-3 border-bottom"},[Object(r["createVNode"])("strong",{class:"text-muted"},"折扣"),Object(r["createVNode"])("strong",null,"$0.00")],-1),U={class:"d-flex justify-content-between py-3 border-bottom"},M=Object(r["createVNode"])("strong",{class:"text-muted"},"總共",-1),T={class:"fw-bold"},A={class:"col-lg-6"},E=Object(r["createVNode"])("h6",{class:"bg-light rounded-pill px-4 py-3 fw-bold text-secondary"},"購買者資訊",-1),F={class:"mb-3"},$=Object(r["createVNode"])("label",{for:"name",class:"form-label"},"姓名",-1),_={class:"mb-3"},J=Object(r["createVNode"])("label",{for:"name",class:"form-label"},"Email",-1),X={class:"mb-3"},z=Object(r["createVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),G={class:"mb-3"},H=Object(r["createVNode"])("label",{for:"address",class:"form-label"},"地址",-1),K={class:"mb-3"},P=Object(r["createVNode"])("label",{for:"message",class:"form-label"},"留言或備註",-1),Q={class:"text-end"},W={key:0,class:"position-absolute top-50 start-100",style:{transform:"translateX(-10px)"}},Y=Object(r["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(r["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1);function Z(e,t,a,Z,ee,te){var ae=this,re=Object(r["resolveComponent"])("v-field"),ce=Object(r["resolveComponent"])("error-message"),se=Object(r["resolveComponent"])("v-form");return Object(r["openBlock"])(),Object(r["createBlock"])("div",c,[Object(r["createVNode"])("div",s,[Object(r["withDirectives"])(Object(r["createVNode"])("div",{class:["alert",ee.info.status],role:"alert"},Object(r["toDisplayString"])(ee.info.msg),3),[[r["vShow"],ee.info.isShow]]),Object(r["createVNode"])("div",o,[Object(r["createVNode"])("div",n,[ee.carts.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-pill px-3",disabled:"delAll"===ee.loadingItem.pos,onClick:t[1]||(t[1]=function(){return te.deleteAllCart&&te.deleteAllCart.apply(te,arguments)})}," 刪除全部 ",8,["disabled"]),"delAll"===ee.loadingItem.pos?(Object(r["openBlock"])(),Object(r["createBlock"])("div",d,[i])):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("table",b,[m,Object(r["createVNode"])("tbody",null,[ee.carts.length>0?(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],{key:0},Object(r["renderList"])(ee.carts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.product_id},[Object(r["createVNode"])("th",p,[Object(r["createVNode"])("div",g,[Object(r["createVNode"])("img",{src:e.product.imageUrl,alt:"",width:"70",height:"70",class:"img-fluid rounded shadow-sm me-3",style:{height:"70px","object-fit":"contain"}},null,8,["src"]),Object(r["createVNode"])("div",O,[Object(r["createVNode"])("h5",j,Object(r["toDisplayString"])(e.product.title),1),Object(r["createVNode"])("span",f,"類別: "+Object(r["toDisplayString"])(e.product.category),1)])])]),Object(r["createVNode"])("td",h,[Object(r["createVNode"])("strong",null,"NT$ "+Object(r["toDisplayString"])(e.product.price),1)]),Object(r["createVNode"])("td",V,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},style:{width:"80px"},min:"1",onChange:function(t){return te.updateCart({cartId:e.id,productId:e.product_id,qty:e.qty})}},null,40,["onUpdate:modelValue","onChange"]),[[r["vModelText"],e.qty,void 0,{number:!0}]])]),Object(r["createVNode"])("td",v,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return te.deleteItemFromCart({cartId:e.id})}},[N],8,["onClick"]),"delItem"===ee.loadingItem.pos&&ee.loadingItem.id===e.id?(Object(r["openBlock"])(),Object(r["createBlock"])("div",w,[y])):Object(r["createCommentVNode"])("",!0)])])})),128)):(Object(r["openBlock"])(),Object(r["createBlock"])("tr",k,[x]))])])])])]),Object(r["createVNode"])("div",C,[Object(r["createVNode"])("div",I,[L,Object(r["createVNode"])("div",B,[Object(r["createVNode"])("ul",q,[Object(r["createVNode"])("li",S,[R,Object(r["createVNode"])("strong",null,"NT$ "+Object(r["toDisplayString"])(ee.price.total),1)]),D,Object(r["createVNode"])("li",U,[M,Object(r["createVNode"])("h5",T,"NT$ "+Object(r["toDisplayString"])(ee.price.final),1)])])])]),Object(r["createVNode"])("div",A,[E,Object(r["createVNode"])(se,{ref:"form",onSubmit:te.requestOrder,class:"px-3"},{default:Object(r["withCtx"])((function(e){var a=e.errors;return[Object(r["createVNode"])("div",F,[$,Object(r["createVNode"])(re,{id:"name",name:"姓名",type:"email",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:ee.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ee.form.user.name=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(ce,{name:"姓名",class:"invalid-feedback"})]),Object(r["createVNode"])("div",_,[J,Object(r["createVNode"])(re,{id:"name",name:"Email",type:"email",class:["form-control",{"is-invalid":a["Email"]}],placeholder:"請輸入Email",rules:"email|required",modelValue:ee.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee.form.user.email=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(ce,{name:"Email",class:"invalid-feedback"})]),Object(r["createVNode"])("div",X,[z,Object(r["createVNode"])(re,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入電話",rules:"min:8|max:10|required",modelValue:ee.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ee.form.user.tel=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(ce,{name:"電話",class:"invalid-feedback"})]),Object(r["createVNode"])("div",G,[H,Object(r["createVNode"])(re,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:ee.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ee.form.user.address=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(ce,{name:"地址",class:"invalid-feedback"})]),Object(r["createVNode"])("div",K,[P,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"message",cols:"30",rows:"2",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=function(e){return ee.form.message=e})},null,512),[[r["vModelText"],ee.form.message]])]),Object(r["createVNode"])("div",Q,[Object(r["createVNode"])("button",{type:"submit",class:"btn btn-secondary rounded-pill py-2 px-4",disabled:"requestOrder"===ee.loadingItem.pos||0===ae.carts.length}," 購買確認 ",8,["disabled"]),"requestOrder"===ee.loadingItem.pos?(Object(r["openBlock"])(),Object(r["createBlock"])("div",W,[Y])):Object(r["createCommentVNode"])("",!0)])]})),_:1},8,["onSubmit"])])])])])}var ee=a("1da1"),te=(a("96cf"),a("365c")),ae=a("97e4"),re={data:function(){return{carts:[],price:{total:0,final_total:0},loadingItem:{pos:"",id:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},info:{isShow:"",status:"",msg:""}}},methods:{fetchCartList:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,r,c,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ae["a"].emit("v-loading",{isLoading:!0}),t.prev=1,t.next=4,Object(te["i"])();case 4:a=t.sent,r=a.data,c=r.success,s=r.message,o=r.data,c?(e.carts=o.carts,e.price.total=o.total,e.price.final=o.final_total):alert(s),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:return t.prev=12,ae["a"].emit("v-loading",{isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},updateCart:function(e){var t=this;return Object(ee["a"])(regeneratorRuntime.mark((function a(){var r,c,s,o,n,l,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.cartId,c=e.productId,s=e.qty,a.prev=1,a.next=4,Object(te["n"])({cartId:r,productId:c,qty:s});case 4:o=a.sent,n=o.data,l=n.success,d=n.message,l?t.fetchCartList():t.showMsg({msg:d,status:"danger"}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},deleteItemFromCart:function(e){var t=this;return Object(ee["a"])(regeneratorRuntime.mark((function a(){var r,c,s,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.cartId,t.toggleLoding({pos:"delItem",id:r}),a.prev=2,a.next=5,Object(te["e"])(r);case 5:c=a.sent,s=c.data,o=s.success,n=s.message,o?t.fetchCartList():t.showMsg({msg:n,status:"danger"}),t.toggleLoding({pos:"",id:""}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},deleteAllCart:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,r,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(te["d"])();case 3:a=t.sent,r=a.data,c=r.success,s=r.message,c?(e.carts=[],e.fetchCartList()):e.showMsg({msg:s,status:"danger"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},requestOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var a,r,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.toggleLoding({pos:"requestOrder"}),t.prev=1,t.next=4,Object(te["g"])({user:e.form.user,message:e.form.message});case 4:if(a=t.sent,r=a.data,c=r.success,s=r.message,!c){t.next=13;break}return t.next=9,e.fetchCartList();case 9:return t.next=11,e.$refs.form.resetForm();case 11:t.next=14;break;case 13:e.showMsg({msg:s,status:"danger"});case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.log(t.t0);case 19:return t.prev=19,e.toggleLoding({pos:""}),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[1,16,19,22]])})))()},toggleLoding:function(e){var t=e.pos,a=e.id;this.loadingItem.pos=t,this.loadingItem.id=a},showMsg:function(e){var t=this,a=e.msg,r=e.status;this.info.isShow=!0,this.info.status="alert-".concat(r),this.info.msg=a,setTimeout((function(){t.info.isShow=!1,t.info.status="",t.info.msg=""}),2e3)}},created:function(){this.fetchCartList()}};re.render=Z;t["default"]=re},b0c0:function(e,t,a){var r=a("83ab"),c=a("9bf2").f,s=Function.prototype,o=s.toString,n=/^\s*function ([^ (]*)/,l="name";r&&!(l in s)&&c(s,l,{configurable:!0,get:function(){try{return o.call(this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-17518b6a.41f9f905.js.map